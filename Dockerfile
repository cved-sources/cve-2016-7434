FROM debian:jessie

LABEL author="opsxcq (opsxcq@strm.sh)"
LABEL maintainer="cved (cved@protonmail.com)"

ENV LANG C.UTF-8
ENV LANGUAGE C.UTF-8
ENV LC_ALL C.UTF-8

ARG DEBIAN_FRONTEND=noninteractive
RUN apt-get -y update \
    && apt-get -y install \
    build-essential \
    ruby \
    && apt-get autoremove \
    && apt-get clean \
    && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*

COPY build/ntp-4.2.8p8 /src/
RUN cd /src \
    && chmod +x configure \
    && sync \
    && ./configure \
    && make

COPY build/ntp.conf /

EXPOSE 123/udp

CMD ["/src/ntpd/ntpd", "-n", "-c", "/ntp.conf"]
